<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Horizon House — Discharge Packet (Fillable)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex, nofollow">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&family=Nunito:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root { --slate:#2b3440; --blue:#1e73be; }

    body {
      margin: 0;
      font-family: Nunito, system-ui;
      color: #000;
      background: #fff;
    }

    .page {
      max-width: 800px;
      margin: 0 auto;
      padding: 24px 32px 40px 32px;
      page-break-after: always;
      box-sizing: border-box;
      position: relative;
    }

    .header {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }

    .logo {
      width: 120px; /* small logo as requested */
      height: auto;
      margin-right: 12px;
    }

    .header-text {
      flex: 1;
    }

    h1 {
      font-family: Inter, system-ui;
      font-size: 1.2rem;
      margin: 0;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      color: var(--slate);
    }

    .subheading {
      font-size: 0.9rem;
      margin-top: 2px;
      color: var(--blue);
      font-weight: 600;
    }

    h2 {
      font-family: Inter, system-ui;
      font-size: 1rem;
      margin: 16px 0 6px 0;
      border-bottom: 1px solid #000;
      padding-bottom: 2px;
    }

    .row {
      display: flex;
      gap: 12px;
      margin-bottom: 6px;
    }

    .field {
      flex: 1;
      font-size: 0.9rem;
    }

    .label {
      font-weight: 600;
      display: block;
      margin-bottom: 2px;
    }

    .text-input {
      width: 100%;
      border: 1px solid #000;
      padding: 3px 4px;
      font-size: 0.88rem;
      box-sizing: border-box;
    }

    .date-input {
      width: 100%;
      border: 1px solid #000;
      padding: 3px 4px;
      font-size: 0.88rem;
      box-sizing: border-box;
    }

    .checkbox-group {
      font-size: 0.9rem;
      margin-bottom: 3px;
      display: flex;
      align-items: center;
    }

    .checkbox-group input[type="checkbox"],
    .checkbox-group input[type="radio"] {
      margin-right: 8px;
      width: 16px;
      height: 16px;
      vertical-align: middle;
    }

    .inline-checkboxes {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin: 8px 0;
    }

    textarea {
      width: 100%;
      min-height: 90px;
      border: 1px solid #000;
      padding: 4px;
      font-family: inherit;
      font-size: 0.9rem;
      resize: vertical;
      box-sizing: border-box;
    }

    .signature-row {
      display: flex;
      gap: 24px;
      margin-top: 12px;
    }

    .signature-block {
      flex: 1;
      font-size: 0.9rem;
    }

    .signature-input {
      width: 100%;
      border: 1px solid #000;
      padding: 3px 4px;
      font-size: 0.88rem;
      box-sizing: border-box;
      margin-top: 18px;
    }

    .signature-label {
      font-size: 0.8rem;
      margin-top: 2px;
    }

    

    @media print {
      body {
        margin: 0;
      }
      .page {
        margin: 0;
        padding: 16px 24px 30px 24px;
      }
      input, textarea {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }
  </style>
</head>

<body>

<form>

  <!-- PAGE 1 — DISCHARGE REPORT -->
  <div class="page">

    <div class="header">
      <img src="HH logo grntree.png" alt="Horizon House logo" style="height:120px;">
      <div class="header-text">
        <h1>Horizon House Sober Living</h1>
        <div class="subheading">Discharge Report — Relapse / Behavioral / Non‑Compliance</div>
      </div>
    </div>

    <h2>Member Information</h2>

    <div class="row">
      <div class="field">
        <span class="label">Client ID (Enter to auto-populate)</span>
        <input type="text" name="client_id" id="client_id" class="text-input" placeholder="Enter Client ID">
      </div>
      <div class="field">
        <span class="label">Member Name</span>
        <input type="text" name="member_name" id="member_name" class="text-input">
      </div>
      <div class="field">
        <span class="label">Date of Discharge</span>
        <input type="date" name="discharge_date" class="date-input">
      </div>
    </div>

    <div class="row">
      <div class="field">
        <span class="label">House</span>
        <div>
          <label class="checkbox-group" style="display:inline-flex; margin-left:24px;">
            <input type="radio" name="house"> 321
          </label>
          <label class="checkbox-group" style="display:inline-flex;">
            <input type="radio" name="house"> 351
        </div>
      </div>
      <div class="field">
        <span class="label">Staff Completing Report</span>
        <input type="text" name="staff_name" class="text-input">
      </div>
    </div>

    <h2>Reason for Discharge</h2>

    <div class="inline-checkboxes">
      <label class="checkbox-group">
        <input type="checkbox" name="reason_relapse"> Relapse
      </label>
      <label class="checkbox-group">
        <input type="checkbox" name="reason_behavior"> Behavioral violation
      </label>
      <label class="checkbox-group">
        <input type="checkbox" name="reason_noncompliance"> Non‑compliance with house rules
      </label>
      <label class="checkbox-group">
        <input type="checkbox" name="reason_honorary"> Honorary discharge
      </label>
      <label class="checkbox-group">
        <input type="checkbox" name="reason_end_benefits"> End of benefits
      </label>
      <label class="checkbox-group">
        <input type="checkbox" name="reason_other"> Other (explain)
      </label>
    </div>
    <input type="text" name="reason_other_text" class="text-input" placeholder="If other, explain here">

    <h2>Incident Description</h2>
    <textarea name="incident_description"></textarea>

    <h2>Relapse Details (if applicable)</h2>

    <label class="checkbox-group">
      <input type="checkbox" name="relapse_drugs_found"> Alcohol/Drugs/Paraphernalia Found
    </label>
    <label class="checkbox-group">
      <input type="checkbox" name="relapse_member_admitted"> Member Admitted to Using
    </label>
    <label class="checkbox-group">
      <input type="checkbox" name="relapse_appeared_under_influence"> Member Appeared to Be Under the Influence
    </label>
    <label class="checkbox-group">
      <input type="checkbox" name="relapse_test_results"> Positive Test Results
    </label>   
    <label class="checkbox-group" style="display:inline-flex; margin-left:24px;">
      <input type="radio" name="drug_screen_reason" value="random"> Random
    </label>
    <label class="checkbox-group" style="display:inline-flex;">
      <input type="radio" name="drug_screen_reason" value="for_cause"> For Cause
    </label>

    <span class="label" style="margin-top:8px;">Type of Test</span>
    <label class="checkbox-group">
      <input type="checkbox" name="test_type_urine"> Urine
    </label>
    <label class="checkbox-group">
      <input type="checkbox" name="test_type_breathalyzer"> Breathalyzer
    </label>
    <label class="checkbox-group">
      <input type="checkbox" name="test_type_oral"> Oral swab
    </label>
    <label class="checkbox-group">
      <input type="checkbox" name="test_type_other"> Other
    </label>

    <div class="row" style="margin-top:4px;">
      <div class="field">
        <span class="label">Substances Detected</span>
        <input type="text" name="substances_detected" class="text-input">
      </div>
      <div class="field">
        <span class="label">Date/Time Test Administered</span>
        <input type="text" name="test_datetime" class="text-input">
      </div>
    </div>

    <div class="footer-page">Page 1 of 2</div>

  </div>

  <!-- PAGE 2 — DISCHARGE REPORT - DETAILS-->
  <div class="page">

    <h2>Incident Details</h2>

    <span class="label" style="margin-top:8px;">Details of Cause for discharge / Staff observations</span>
    <textarea name="behavior_description"></textarea>

    <span class="label" style="margin-top:8px;">Member Response / Statement</span>
    <textarea name="member_statement"></textarea>

    <h2>Safety & Exit Procedures</h2>

    <div class="inline-checkboxes">
      <label class="checkbox-group">
        <input type="checkbox" name="exit_property_removed"> Member removed all property
      </label>
      <label class="checkbox-group">
        <input type="checkbox" name="exit_property_stored" id="property_stored_checkbox"> Property stored
      </label>
      <label class="checkbox-group" style="margin-left:10px;">
        <input type="radio" name="property_stored_yesno" value="yes" id="property_yes"> Yes
      </label>
      <label class="checkbox-group">
        <input type="radio" name="property_stored_yesno" value="no"> No
      </label>
    </div>
    <span class="label" style="font-size:0.8rem;font-style:italic;color:#666;">If yes, Property Storage Log will open upon completion of this form</span>

    <div class="inline-checkboxes" style="margin-top:12px;">
      <span class="label" style="margin-right:10px;">Member left without incident:</span>
      <label class="checkbox-group">
        <input type="radio" name="left_without_incident" value="yes"> Yes
      </label>
      <label class="checkbox-group">
        <input type="radio" name="left_without_incident" value="no" id="incident_no"> No
      </label>
      <span class="label" style="font-size:0.85rem;font-style:italic;margin-left:10px;">(if no, explain below)</span>
    </div>
    <textarea name="incident_explanation" id="incident_explanation" style="min-height:50px;margin-top:6px;" placeholder="Explain incident..."></textarea>

    <div class="row" style="margin-top:12px;">
      <div class="field">
        <span class="label">Transitioning to:</span>
        <input type="text" name="transitioning_to" class="text-input" placeholder="e.g., Detox, IOP, Home, etc.">
      </div>
    </div>

    <div class="inline-checkboxes" style="margin-top:12px;">
      <span class="label" style="margin-right:10px;">Transportation:</span>
      <label class="checkbox-group">
        <input type="checkbox" name="transport_self"> Self
      </label>
      <label class="checkbox-group">
        <input type="checkbox" name="transport_other" id="transport_other_check"> Other:
      </label>
      <input type="text" name="transport_other_text" class="text-input" style="width:300px;margin-left:5px;" placeholder="Specify...">
    </div>

    <div style="margin-top:12px;">
      <span class="label">Member Status:</span>
      <div class="inline-checkboxes" style="margin-top:6px;">
        <label class="checkbox-group">
          <input type="checkbox" name="status_alumni" value="2"> (2) Alumni
        </label>
        <label class="checkbox-group">
          <input type="checkbox" name="status_no_access" value="3"> (3) No access
        </label>
        <label class="checkbox-group">
          <input type="checkbox" name="status_relapse" value="6"> (6) Relapse, eligible for return after review
        </label>
        <label class="checkbox-group">
          <input type="checkbox" name="status_see_notes"> See below notes
        </label>
      </div>
    </div>

    <div style="margin-top:16px;">
      <span class="label" style="font-weight:700;">Room Inspected:</span>
      <div style="margin-top:8px;">
        <label class="checkbox-group">
          <input type="checkbox" name="room_cleaned"> Room cleaned and ready to occupy
        </label>
      </div>
      <div style="margin-top:4px;">
        <label class="checkbox-group">
          <input type="checkbox" name="room_maintenance" id="room_maintenance_check"> Maintenance or repairs needed
        </label>
        <span class="label" style="font-size:0.8rem;font-style:italic;color:#666;margin-left:26px;">(Maintenance Request Form will open after completion)</span>
      </div>
      <div style="margin-top:8px;">
        <label class="checkbox-group">
          <input type="checkbox" name="room_property_left" id="property_left_check"> Property left
        </label>
        <div id="property_left_options" style="margin-left:26px;margin-top:6px;display:none;">
          <label class="checkbox-group" style="margin-bottom:6px;">
            <input type="checkbox" name="property_stored_option" id="property_stored_option"> Stored
          </label>
          <span class="label" style="font-size:0.8rem;font-style:italic;color:#666;margin-left:26px;">(Property Storage Form will open after completion of this form)</span>
          <div style="margin-top:6px;">
            <label class="checkbox-group">
              <input type="checkbox" name="property_disposed" id="property_disposed_check"> Disposed of
            </label>
            <div id="disposal_description" style="margin-left:26px;margin-top:6px;display:none;">
              <span class="label" style="font-size:0.9rem;">Brief description of property and how disposed of:</span>
              <textarea name="disposal_details" style="min-height:60px;margin-top:4px;" placeholder="Describe property and disposal method..."></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>

    <span class="label" style="margin-top:12px;">Additional Notes:</span>
    <textarea name="additional_notes" style="min-height:70px;"></textarea>
    
    <h2>Signatures</h2>

    <div class="signature-row">
      <div class="signature-block">
        <input type="text" name="staff_signature" class="signature-input">
        <div class="signature-label">Staff Signature</div>
      </div>
      <div class="signature-block">
        <input type="date" name="staff_signature_date" class="signature-input">
        <div class="signature-label">Date</div>
      </div>
    </div>

    <div class="signature-row">
      <div class="signature-block">
        <input type="text" name="member_signature" class="signature-input">
        <div class="signature-label">Member Signature (if cooperative)</div>
      </div>
      <div class="signature-block">
        <input type="date" name="member_signature_date" class="signature-input">
        <div class="signature-label">Date</div>
      </div>
    </div>
    <span class="label" style="margin-top:8px;">Right click to print or save to PDF</span>
  </label>
    <div class="footer-page">Page 2 of 2</div>

  </div>

  <!-- PAGE 3 — PROPERTY STORAGE LOG -->
  <div class="page">

    <div class="header">
      <img src="HH logo grntree.png" alt="Horizon House logo" style="height:120px;">
      <div class="header-text">
        <h1>Horizon House Sober Living</h1>
        <div class="subheading">Property Storage Log</div>
      </div>
    </div>

    <h2>Member & Storage Information</h2>

    <div class="row">
      <div class="field">
        <span class="label">Member Name</span>
        <input type="text" name="storage_member_name" class="text-input">
      </div>
      <div class="field">
        <span class="label">Date Stored</span>
        <input type="date" name="storage_date" class="date-input">
      </div>
    </div>

        <span class="label">Expected Pick-up Date  (Items not picked up by expected pick-up date will be disposed of.)</span>
    <input type="date" name="storage_pick-up" class="date-input">

    <span class="label">Storage Location</span>
    <input type="text" name="storage_location" class="text-input">

    <h2>Inventory of Stored Property</h2>
    <textarea name="storage_inventory" style="min-height:90px;"></textarea>

    <h2>Condition of Items</h2>
    <textarea name="storage_condition" style="min-height:20px;"></textarea>

    <h2>Final Disposition of Property</h2>
    
    <label class="checkbox-group">
      <input type="checkbox" name="final_disposed_of"> Disposed of
    </label>

   <label class="input">Disposed of by
    <input type="text" name="disposed_by" class="text-input">
    </label>

    <label class="checkbox-group"style="margin-top:8px;">
      <input type="checkbox" name="final_donated"> Donated
    </label>
    <label class="input"></label>Donated to
        <input type="text" name="donated_to" class="text-input">
    </label>

    <label class="checkbox-group" style="margin-top:8px;">
      <input type="checkbox" name="final_picked_up_by"> Picked up by Member or Member Representative
    </label>   
      <label class="input">Person Picking Up Property
        <input type="text" name="pickup_person" class="text-input">
      
    <div class="signature-row">
      <div class="signature-block">
        <input type="text" name="member_signature" class="signature-input">
        <div class="signature-label">Pick-up Persons Signature
        </div>
      </div>
      <div class="signature-block">
        <input type="date" name="member_signature_date" class="signature-input">
        <div class="signature-label">Date</div>
      </div>
    </div>
        <input type="text" name="staff_final_signature" class="signature-input">
        <div class="signature-label">Staff Verifying Final Disposition</div>
      </div>
    </div>

  </div>

</form>

<script>
// Client ID lookup - will connect to backend API to pull member data from members.xlsx
document.getElementById('client_id').addEventListener('blur', async function() {
  const clientId = this.value.trim();
  if (!clientId) return;
  
  try {
    // Call backend API to get member data
    const response = await fetch(`https://horizon-portal-backend-production.up.railway.app/api/members/${clientId}`);
    if (response.ok) {
      const memberData = response.json();
      // Populate fields with member data
      if (memberData.name) document.getElementById('member_name').value = memberData.name;
      // Add more field mappings as needed
    } else {
      console.log('Member not found');
    }
  } catch (error) {
    console.error('Error fetching member data:', error);
  }
});

// Property storage form trigger
document.getElementById('property_yes').addEventListener('change', function() {
  if (this.checked) {
    // Show alert that property storage form will open
    alert('Property Storage Log (Page 3) will be available for completion at the end of this form.');
  }
});

// Show/hide incident explanation based on "No" selection
document.getElementById('incident_no').addEventListener('change', function() {
  const textarea = document.getElementById('incident_explanation');
  if (this.checked) {
    textarea.style.display = 'block';
    textarea.focus();
  }
});

document.querySelector('input[name="left_without_incident"][value="yes"]').addEventListener('change', function() {
  if (this.checked) {
    document.getElementById('incident_explanation').style.display = 'none';
  }
});

// Room Inspected - Maintenance Request Form trigger
document.getElementById('room_maintenance_check').addEventListener('change', function() {
  if (this.checked) {
    alert('Maintenance Request Form will open after completion of this form.');
  }
});

// Property Left checkbox - show/hide sub-options
document.getElementById('property_left_check').addEventListener('change', function() {
  const options = document.getElementById('property_left_options');
  if (this.checked) {
    options.style.display = 'block';
  } else {
    options.style.display = 'none';
    // Uncheck sub-options when parent is unchecked
    document.getElementById('property_stored_option').checked = false;
    document.getElementById('property_disposed_check').checked = false;
    document.getElementById('disposal_description').style.display = 'none';
  }
});

// Property Stored option - trigger alert
document.getElementById('property_stored_option').addEventListener('change', function() {
  if (this.checked) {
    alert('Property Storage Form will open after completion of this form.');
  }
});

// Property Disposed checkbox - show/hide description textarea
document.getElementById('property_disposed_check').addEventListener('change', function() {
  const description = document.getElementById('disposal_description');
  if (this.checked) {
    description.style.display = 'block';
  } else {
    description.style.display = 'none';
  }
});
</script>

</body>